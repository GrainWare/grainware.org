---
import NavBar from "../components/NavBar.astro";
import Layout from "../layouts/Layout.astro";
import dayjs from "dayjs";
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import PostHeader from "../components/PostHeader.astro";
let posts = await getCollection("blog");
posts = posts.sort(
  (a, b) => dayjs(b.data.date).unix() - dayjs(a.data.date).unix(),
);
---

<Layout>
  <Fragment slot="head">
    <!-- Primary Meta Tags -->
    <title>blog posts</title>
    <meta name="description" content="list of our blog posts" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article" />
    <meta property="og:title" content="blog posts" />
    <meta property="og:description" content="list of our blog posts" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:title" content="blog posts" />
    <meta property="twitter:description" content="list of our blog posts" />
  </Fragment>

  <NavBar />

  <div
    class="m-8 flex flex-col rounded-2xl bg-black px-4 py-2 drop-shadow-md drop-shadow-black"
  >
    <a
      class="w-fit text-xl font-bold text-white underline duration-100 hover:text-neutral-200 md:text-3xl"
      href="/rss.xml"
    >
      subscribe to the rss feed
    </a>
    <p class="text-md text-neutral-300">please man i need this</p>
  </div>

  <ul>
    {
      posts.map((post) => (
        <li>
          <a href={`/posts/${post.id}`} id={`postheader-${post.id}`}>
            <PostHeader post={post} hoverAnimation={true} />
          </a>
        </li>
      ))
    }
  </ul>
</Layout>
